<__trans_section component="ContactForm">
<mt:setvarblock name="list_id"><mt:var name="object_type">-listing</mt:setvarblock>
<mt:if name="blog_id"><mt:var name="blog_view" value="1"></mt:if>
<mt:unless name="search_replace">
<mt:unless name="dialog_view">
<mt:setvarblock name="action_buttons">
        <button
            class="mt-delete-items button"
            onclick="doRemoveItems(getByID('<mt:var name="object_type">-listing-form'), '<__trans phrase="Contact Form" escape="js">', '<__trans phrase="Contact Form" escape="js">'); return false;"
            accesskey="x"
            title="<__trans phrase="Delete selected Contact Form (x)">"
            ><__trans phrase="Delete"></button>
</mt:setvarblock>
<mt:else>
    <div class="listing-filter" style="margin-top:1em">
        <form action="<mt:var name="script_url">" method="get" id="modal-search">
            <input type="hidden" name="__mode" value="list_contactformgroup" />
            <input type="hidden" name="blog_id" value="<mt:var name="blog_id">" />
            <input type="hidden" name="edit_field" value="<mt:var name="edit_field" escape="html">" />
            <input type="hidden" name="dialog" value="1" />
            <input type="hidden" name="dialog_view" value="1" />
            <input type="text" class="text" value="<mt:unless name="query"><__trans phrase="Search"><mt:else><mt:var name="query" escape="html"></mt:else></mt:unless>" name="query" class="search-input search-query" onblur="if(this.value==''){this.style.color=''; this.form.reset()}" onfocus="this.value = ''; this.style.color = '#000';" />
            <input type="image" class="search-command search-submit" src="<$mt:var name="static_uri"$>images/search-submit-dialog.png" title="<__trans phrase="Search">" />
            <a href="javascript:void(0)" class="search-reset hidden"><__trans phrase="Reset"></a>
        </form>
    </div>
</mt:else>
</mt:unless>
</mt:unless>
<mt:setvarblock name="table_header">
    <tr>
    <mt:unless name="search_replace">
        <th class="col head cb" style="width:21px;padding:7px">
        <mt:unless name="dialog_view">
            <input type="checkbox" name="id-head" value="all" class="select" />
        </th>
        </mt:unless>
    </mt:unless>
        <th class="col head status" style="text-align:left;width:23px;padding:7px"><img src="<mt:var name="static_uri">images/status_icons/invert-flag.gif" width="9" height="9" alt="<__trans phrase="Status">" /></th>
        <th class="col head name" style="padding:7px"><__trans phrase="Name"> (<__trans phrase="Element Count">)</th>
        <mt:unless name="dialog_view">
        <th class="col head feedback_count" style="width:40px;padding:7px"><__trans phrase="Posts"></th>
        <th class="col head setting" style="width:200px;padding:7px"><__trans phrase="Settings"></th>
        </mt:unless>
        <th class="col head author_name" style="width:70px;padding:7px"><__trans phrase="Author"></th>
        <mt:if name="scope_type" ne="blog">
        <th class="col head blog_name" style="padding:7px"><__trans phrase="Blog"></th>
        </mt:if>
        <th class="col head created_on" style="width:88px;padding:7px"><__trans phrase="Created on"></th>
        <th class="col head modified_on" style="width:88px;padding:7px"><__trans phrase="Modified on"></th>
    </tr>
</mt:setvarblock>

<mtapp:listing id="$list_id">
    <mt:if __first__>
            <thead><mt:var name="table_header"></thead>
            <tfoot><mt:var name="table_header"></tfoot>
            <tbody>
    </mt:if>
                <tr class="<mt:if name="__odd__">odd<mt:else>even</mt:if>">
                <mt:unless name="search_replace">
                    <td class="col cb">
                        <mt:if name="dialog_view">
                            <input type="radio" name="id" value="<mt:var name="id" escape="html">" class="select" />
                        <mt:else>
                            <mt:if name="can_edit"><input type="checkbox" name="id" value="<mt:var name="id" escape="html">" class="select" /></mt:if>
                        </mt:else>
                        </mt:if>
                    </td>
                </mt:unless>
                    <td class="col status" style="text-align:center;padding-top:10px">
                    <a href="<mt:var name="mt_url">?__mode=list&amp;_type=contactformgroup&amp;blog_id=<mt:var name="blog_id">&amp;filter=status&amp;filter_val=<mt:var name="status">">
                    <mt:if name="status" eq="1"><img src="<mt:var name="static_uri">images/status_icons/draft.gif" width="9" height="9" alt="<__trans phrase="Draft">" /></mt:if>
                    <mt:if name="status" eq="2"><img src="<mt:var name="static_uri">images/status_icons/success.gif" width="9" height="9" alt="<__trans phrase="Publishing">" /></mt:if>
                    <mt:if name="status" eq="3"><img src="<mt:var name="static_uri">images/status_icons/future.gif" width="9" height="9" alt="<__trans phrase="Scheduled">" /></mt:if>
                    <mt:if name="status" eq="4"><img src="<mt:var name="static_uri">images/status_icons/close.gif" width="9" height="9" alt="<__trans phrase="Ended">" /></mt:if>
                    </a>
                    </td>
                    <td class="col name">
                        <input type="hidden" id="name-<mt:var name="id" escape="html">" value="<mt:var name="name" escape="html">" />
                    <mt:if name="can_edit"><a <mt:if name="dialog_view">target="_blank"</mt:if> href="<mt:var name="mt_url">?__mode=view&amp;blog_id=<mt:var name="blog_id">&amp;id=<mt:var name="id">&amp;_type=contactformgroup"></mt:if>
                        <mt:if name="name"><mt:var name="name" escape="html"><mt:else>...</mt:else></mt:if> (<mt:var name="count">)
                    <mt:if name="can_edit"></a></mt:if>
                    </td>
                    <mt:unless name="dialog_view">
                    <td class="col feedback_count" style="text-align:right">
                    <mt:if name="can_feedback"><a href="<mt:var name="mt_url">?__mode=list_feedback&amp;blog_id=<mt:var name="blog_id">&amp;filter=contactform_group_id&amp;filter_val=<mt:var name="id">"></mt:if>
                    <mt:if name="feedback_count"><mt:var name="feedback_count"><mt:else>-</mt:else></mt:if>
                    <mt:if name="can_feedback"></a></mt:if>
                    </td>
                    <td class="col setting">
                        <mt:setvar name="has_setting" value="0">
                        <mt:if name="requires_login"><mt:if name="has_setting">, </mt:if><__trans phrase="Require Login"><mt:setvar name="has_setting" value="1"></mt:if>
                        <mt:if name="mail_admin"><mt:if name="has_setting">, </mt:if><__trans phrase="Send Notify"><mt:setvar name="has_setting" value="1"></mt:if>
                        <mt:if name="mail_sender"><mt:if name="has_setting">, </mt:if><__trans phrase="Notify to Seder"><mt:setvar name="has_setting" value="1"></mt:if>
                        <mt:unless name="has_setting">
                        <__trans phrase="None">
                        </mt:unless>
                    </td>
                    </mt:unless>
                    <td class="col author_name"><a href="<mt:var name="mt_url">?__mode=list&amp;_type=contactformgroup&amp;blog_id=<mt:var name="blog_id">&amp;filter=author_id&amp;filter_val=<mt:var name="author_id"><mt:if name="dialog_view">&amp;dialog_view=1&amp;edit_field=<mt:var name="edit_field" escape="url">&amp;contactformgrop_select=1&amp;dialog=1</mt:if>"><mt:var name="author_name" escape="html"></a></td>
                    <mt:if name="scope_type" ne="blog">
                    <td class="col blog_name"><a href="<mt:var name="mt_url">?__mode=list&amp;_type=contactformgroup&amp;blog_id=<mt:var name="weblog_id">"><mt:var name="weblog_name" escape="html"></a></td>
                    </mt:if>
                    <td class="col created_on"><mt:var name="created_on"></td>
                    <td class="col modified_on"><mt:var name="modified_on"></td>
                </tr>
    <mt:if __last__>
            </tbody>
    </mt:if>
</mtapp:listing>

<mt:if name="dialog_view">
    <div class="actions-bar">
        <form action="" method="">
            <button
                onclick="append_object();return false;"
                type="submit"
                accesskey="s"
                title="<__trans phrase="Next (s)">"
                class="action primary-button primary button close disabled-button"
                >
                <__trans phrase="Next"></button>
            <button
                type="submit"
                accesskey="x"
                class="cancel action button mt-close-dialog"
                title="<__trans phrase="Cancel (x)">">
                <__trans phrase="Cancel"></button>
        </form>
        <script type="text/javascript">
            function append_object (){
                var tags = document.getElementsByTagName( 'input' );
                var len  = tags.length;
                var selected;
                var name;
                for ( var i = 0; i < len; i++ ) {
                    var rb = tags[ i ];
                    if ( rb.type == 'radio' ) {
                        if ( rb.checked ) {
                            selected = rb.value;
                            name = getByID( 'name-' + selected ).value;
                            break;
                        }
                    }
                }
                if ( selected ) {
                    name = '<span id="obj-<mt:var name="edit_field" escape="js">-' + selected + '">' + name + ' (ID:' + selected + ') <a href="javascript:;" onclick="jQuery(this).parent().remove();contactformgroup_remove_val' + '(\'' + selected + '\',\'<mt:var name="edit_field" escape="js">\');"><img src="<mt:var name="static_uri">images/status_icons/close.gif" alt="<__trans phrase="Delete">" title="<__trans phrase="Delete">" /></a></span>';
                    if (! window.parent.getByID( 'obj-<mt:var name="edit_field" escape="js">-' + selected ) ){
                        window.parent.getByID( 'field_value-<mt:var name="edit_field" escape="js">' ).innerHTML = name;
                        var insert_val = '';
                        insert_val = selected;
                        window.parent.getByID( '<mt:var name="edit_field" escape="js">' ).value = insert_val;
                    }
                    window.parent.jQuery.fn.mtDialog.close();
                } else {
                    alert( '<__trans phrase="None selected">' );
                }
                return false;
            }
        </script>
    </div>
</mt:if>
</__trans_section>
