name: BlogTree
id:   BlogTree
key:  blogtree
version: 1.0
author_link: http://alfasado.net/
author_name: Alfasado Inc.
l10n_class: BlogTree::L10N
description: <__trans phrase="Dashboard for PowerCMS.">

system_config_template: BlogTree_config.tmpl
settings: 
    get_weblog_ids_cache:
        default: 
    hide_assets:
        default: 1

widgets:
    blog_tree:
        label: Blog Tree
        plugin: $plugin
        template: BlogTree_widgets.tmpl
        singular: 1
        set: main
        condition: sub { my ( $page, $scope ) = @_; return $page eq 'dashboard'; }
        code: $blogtree::BlogTree::Widgets::_blog_tree
    blog_tree_summary:
        label: Blog Tree Summary
        plugin: $plugin
        template: BlogTree_summary.tmpl
        singular: 1
        set: sidebar
        condition: sub { my ( $page, $scope ) = @_; return $page eq 'dashboard'; }
        code: $blogtree::BlogTree::Widgets::_blog_tree

callbacks:
    MT::App::CMS::template_source.header: $blogtree::BlogTree::Plugin::_set_alt_css
    MT::App::CMS::template_param.asset_upload: $blogtree::BlogTree::Plugin::_blogtree_upload
    MT::App::CMS::template_source.asset_replace: $blogtree::BlogTree::Plugin::_blogtree_upload_replace
    cms_post_save.asset: $blogtree::BlogTree::Plugin::_cb_cms_post_save_asset
    cms_pre_remove.asset: $blogtree::BlogTree::Plugin::_cb_asset_pre_remove
    cms_pre_remove.folder: $blogtree::BlogTree::Plugin::_cb_folder_pre_remove
    cms_upload_image: $blogtree::BlogTree::Plugin::_cb_cms_upload_file
    cms_upload_file.file: $blogtree::BlogTree::Plugin::_cb_cms_upload_file

applications:
    cms:
        methods:
            blogtree: $blogtree::BlogTree::CMS::_blogtree_menu
            blogtree_uploaded: $blogtree::BlogTree::CMS::_mode_blogtree_uploaded


tags:
    block:
        IfUserIsSuperuser?: sub { return MT->instance()->user->is_superuser(); }
        BlogTreeEntriesHeader: $blogtree::BlogTree::Tags::_hdlr_pass_tokens
        BlogTreeEntriesFooter: $blogtree::BlogTree::Tags::_hdlr_pass_tokens
        IfBlogTree?: $blogtree::BlogTree::Tags::_hdlr_if_blogtree
        RemoveReturn: $blogtree::BlogTree::Tags::_remove_return
        BlogTreeEntries: $blogtree::BlogTree::Tags::_hdlr_entries
        CMSBlogContext: $blogtree::BlogTree::Tags::_hdlr_blog_ctx
        IfBlogTreeEntryPublished?: $blogtree::BlogTree::Tags::_hdlr_is_published
        IfCategoryIsTopLevel?: $blogtree::BlogTree::Tags::_hdlr_is_toplevel
        IfUserCanCreatePage?: $blogtree::BlogTree::Tags::_hdlr_can_create_page
        IfUserCanCreateEntry?: $blogtree::BlogTree::Tags::_hdlr_can_create_entry
        IfChildBlog?: $blogtree::BlogTree::Tags::_hdlr_if_child_blog
        IfUserHasPerm?: $blogtree::BlogTree::Tags::_hdlr_if_user_has_perm
        BlogTreeAssets: $blogtree::BlogTree::Tags::_hdlr_assets
        BlogTreeAssetsHeader: $blogtree::BlogTree::Tags::_hdlr_pass_tokens
        BlogTreeAssetsFooter: $blogtree::BlogTree::Tags::_hdlr_pass_tokens
    function:
        BlogTreeDashboardCSS: $blogtree::BlogTree::Tags::_blogtreedashboardcss
        ISCreatePosts: $blogtree::BlogTree::Tags::_is_create_post
        BlogTreeEntriesCount: $blogtree::BlogTree::Tags::_hdlr_blog_entry_count
        BlogTreeFolderCount: $blogtree::BlogTree::Tags::_hdlr_blog_folder_count
        BlogTreeTagCount: $blogtree::BlogTree::Tags::_hdlr_blog_tag_count
        BlogTreeCommentCount: $blogtree::BlogTree::Tags::_hdlr_blog_comment_count
        BlogTreeFormDataCount: $blogtree::BlogTree::Tags::_hdlr_blog_form_count
        BlogTreePingCount: $blogtree::BlogTree::Tags::_hdlr_blog_ping_count
        EntryStatusNumber: $blogtree::BlogTree::Tags::_hdlr_entry_status_num
        BlogTreeEntiesLastn: $blogtree::BlogTree::Tags::_blogtree_entries_lastn
        BlogTreeCatMaxDepth: $blogtree::BlogTree::Tags::_blogtree_cat_depth
        BlogTreeCatMaxDisplay: $blogtree::BlogTree::Tags::_blogtree_cat_display
        BlogTreeBlogNameTrim: $blogtree::BlogTree::Tags::_blogtree_blogname_trim
        BlogTreeEntryTitleTrim: $blogtree::BlogTree::Tags::_blogtree_entrytitle_trim
        StaticFullURL: $blogtree::BlogTree::Tags::_staticfullurl
        AdminFullURL: $blogtree::BlogTree::Tags::_adminfullurl
