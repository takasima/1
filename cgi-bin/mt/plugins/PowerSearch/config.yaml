name: PowerSearch
id: PowerSearch 
key: PowerSearch
version: 1.8
schema_version: 0.003
description: <__trans phrase="Enterprise Search powerd by Hyper Estraier.">
author_name: Alfasado Inc.
author_link: http://alfasado.net/
l10n_class: PowerSearch::L10N

system_config_template: search_cfg.tmpl
blog_config_template: search_blog.tmpl

settings:
    draftpath:
        default: draft
    gatherlang:
        default: ja
    realtime_update:
        default: 0
    default_res_limit:
        default: 20
    target_files:
        default: xls,doc,ppt,pdf
    exclude_indexing:
        default:

callbacks:
    build_file:                    $PowerSearch::PowerSearch::Callbacks::_build_file
    post_delete_archive_file:      $PowerSearch::PowerSearch::Callbacks::_delete_archive
    MT::App::CMS::cms_upload_file: $PowerSearch::PowerSearch::Callbacks::_cms_upload_file
    MT::Asset::post_remove:        $PowerSearch::PowerSearch::Callbacks::_post_delete_asset

tags:
    block:
        EstraierMeta:         $PowerSearch::PowerSearch::Tags::_estraier_meta
        EstraierBlock:        $PowerSearch::PowerSearch::Tags::_estraier_block
        EstraierTarget:       $PowerSearch::PowerSearch::Tags::_estraier_target
        EstraierSuffix:       $PowerSearch::PowerSearch::Tags::_estraier_suffix
        EstraierResults:      $PowerSearch::PowerSearch::Tags::_estraier_result
        EstResultHeader:      $PowerSearch::PowerSearch::Tags::_hdlr_pass_tokens
        EstResultFooter:      $PowerSearch::PowerSearch::Tags::_hdlr_pass_tokens
        IfEstResultNext?:     $PowerSearch::PowerSearch::Tags::_hdlr_if_result_next
        IfEstResultPrev?:     $PowerSearch::PowerSearch::Tags::_hdlr_if_result_prev
        IfEstResultMatch?:    $PowerSearch::PowerSearch::Tags::_hdlr_if_result_match
        EstResultPager:       $PowerSearch::PowerSearch::Tags::_estresult_pager
        EstResultPagerHeader: $PowerSearch::PowerSearch::Tags::_hdlr_pass_tokens
        EstResultPagerFooter: $PowerSearch::PowerSearch::Tags::_hdlr_pass_tokens
        EstResultBlogCtx:     $PowerSearch::PowerSearch::Tags::_estraier_blog_ctx
        EstResultEntryCtx:    $PowerSearch::PowerSearch::Tags::_estraier_entry_ctx

    function:
        EstraierScript:       $PowerSearch::PowerSearch::Tags::_estraier_script
        EstResultTitle:       $PowerSearch::PowerSearch::Tags::_estresult_title
        EstResultEntryBlogID: $PowerSearch::PowerSearch::Tags::_estresult_entry_blog_id
        EstResultEntryID:     $PowerSearch::PowerSearch::Tags::_estresult_entry_id
        EstResultURL:         $PowerSearch::PowerSearch::Tags::_estresult_url
        EstResultExcerpt:     $PowerSearch::PowerSearch::Tags::_estresult_excerpt
        EstResultDate:        $PowerSearch::PowerSearch::Tags::_estresult_date
        EstResultCount:       $PowerSearch::PowerSearch::Tags::_estresult_count
        EstResultAttribute:   $powersearch::PowerSearch::Tags::_estresult_attribute
        EstCmdPath:           $PowerSearch::PowerSearch::Tags::_estcmdpath
        EstDbPath:            $PowerSearch::PowerSearch::Tags::_estdbpath

    modifier:
        is_draft:             $PowerSearch::PowerSearch::Tags::_is_draft
        hilight:              $PowerSearch::PowerSearch::Tags::_tag_highlight
        highlight:            $PowerSearch::PowerSearch::Tags::_tag_highlight

tasks:
    EstcmdGather:
        label: Update index of Hyper Estraier
        frequency: 3
        code: $PowerSearch::PowerSearch::Tasks::_update_index
