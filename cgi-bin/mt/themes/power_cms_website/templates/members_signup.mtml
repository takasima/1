<$MTBlogID setvar="blog_id"$>
<mt:IfUserAgent wants="SmartPhone">
<!DOCTYPE HTML>
<html lang="<$MTBlogLanguage$>" dir="ltr">
    <head>
        <meta charset="<$MTPublishCharset$>">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
        <title><__trans phrase="Create an account"> | <mt:blogname escape="html"></title>
        <link href="<$MTLink template="<__trans phrase="SP-Stylesheet(import.css)">"$>" rel="stylesheet" type="text/css" media="screen,print">
        <link href="<$MTLink template="<__trans phrase="SP-Stylesheet(login.css)">"$>" rel="stylesheet" type="text/css" media="screen,print">
        <script src="<$MTLink template="JavaScript(jquery.js)"$>"></script>
        <script src="<$MTLink template="JavaScript"$>"></script>
        <script src="<$MTLink template="<__trans phrase="SP-JavaScript(main.js)">"$>"></script>
    </head>
<header id="top" class="clearfix">
    <p id="site_title"><mt:blogname escape="html"></p>
</header>

<h1 id="page_title"><a href="#global_nav"><__trans phrase="Sign In"></a></h1>

<div id="contents">
    <section>
        <div class="panel">
            <div class="login_panel">
                <$MTSetVar name="msg" value=""$>
                <MTIf name="error">
                    <$MTSetVar name="error_author_exist" value=""$>
                    <$MTSetVar name="error_required" value=""$>
                    <$MTSetVar name="error_nickname" value=""$>
                    <$MTSetVar name="error_email" value=""$>
                    <$MTSetVar name="error_email_not_valid" value=""$>
                    <$MTSetVar name="error_mobile_not_valid" value=""$>
                    <$MTSetVar name="error_mobile_address" value=""$>
                    <$MTSetVar name="error_password_not_verify" value=""$>
                    <$MTSetVar name="error_password" value=""$>
                    <$MTSetVar name="error_pass_verify" value=""$>
                    <MTLoop name="errors">
                        <MTIf name="error_name" eq="author_exist"><MTSetVarBlock name="error_author_exist"><__trans phrase="A user with the same name already exists."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="required"><MTSetVarBlock name="error_required"><__trans phrase="Please enter requires."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="nickname"><MTSetVarBlock name="error_nickname"><__trans phrase="Please enter your display name."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="email"><MTSetVarBlock name="error_email"><__trans phrase="Please enter your E-mail."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="email_not_valid"><MTSetVarBlock name="error_email_not_valid"><__trans phrase="The value you entered was not a valid E-mail."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="mobile_not_valid"><MTSetVarBlock name="error_mobile_not_valid"><__trans phrase="The value you entered was not a valid Mobile E-mail."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="mobile_address"><MTSetVarBlock name="error_mobile_address"><__trans phrase="Please enter your Mobile E-mail."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="password_not_verify"><MTSetVarBlock name="error_password_not_verify"><__trans phrase="Both passwords must match."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="password"><MTSetVarBlock name="error_password"><__trans phrase="Select a password for your account."><br /></MTSetVarBlock></MTIf>
                        <MTIf name="error_name" eq="pass_verify"><MTSetVarBlock name="error_pass_verify"><__trans phrase="Both passwords must match."><br /></MTSetVarBlock></MTIf>
                    </MTLoop>
                    <$MTSetVar name="error_detail" value=""$>
                    <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_author_exist"$></MTSetVarBlock>
                    <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_required"$></MTSetVarBlock>
                    <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_nickname"$></MTSetVarBlock>
                    <MTIf name="error_email_not_valid">
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_email_not_valid"$></MTSetVarBlock>
                    <MTElse>
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_email"$></MTSetVarBlock>
                    </MTIf>
                    <MTIf name="error_mobile_not_valid">
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_mobile_not_valid"$></MTSetVarBlock>
                    <MTElse>
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_mobile_addres"$></MTSetVarBlock>
                    </MTIf>
                    <MTIf name="error_password">
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_password"$></MTSetVarBlock>
                    <MTElse name="error_pass_verify">
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_pass_verify"$></MTSetVarBlock>
                    <MTElse>
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_password_not_verify"$></MTSetVarBlock>
                    </MTIf>
                    <MTIf name="error_message">
                        <MTSetVarBlock name="error_detail" append="1"><$MTVar name="error_message"$><br /></MTSetVarBlock>
                    </MTIf>
                    <MTIf name="error_detail">
                        <MTSetVarBlock name="msg" append="1"><$MTVar name="error_detail"$></MTSetVarBlock>
                    </MTIf>
                    <MTUnless name="msg">
                        <MTSetVarBlock name="msg"><__trans phrase="Saving failed."></MTSetVarBlock>
                    </MTUnless>
                </MTIf>
                <MTIf name="saved">
                    <MTSetVarBlock name="msg"><__trans phrase="Thanks for signing up"></MTSetVarBlock>
                    <MTUnless name="registered">
                        <MTSetVarBlock name="msg"><__trans phrase="To complete the registration process you must first confirm your account. An email has been sent to [_1]." params="<mt:var name="send_email" escape="html">"></MTSetVarBlock>
                    </MTUnless>
                    <MTElse>
                        <MTIf name="regist">
                            <MTIf name="registration_failed">
                                <MTSetVarBlock name="msg"><__trans phrase="You have attempted to use a feature that you do not have permission to access. If you believe you are seeing this message in error contact your system administrator."></MTSetVarBlock>
                                <MTElse>
                                    <MTSetVarBlock name="msg"><__trans phrase="Thanks for the confirmation. This account has been disabled. Please wait for a while until it is approved by the administrator."></MTSetVarBlock>
                                </MTElse>
                            </MTIf>
                            <MTElse>
                                <$MTSetVar name="display_form" value="1"$>
                            </MTElse>
                        </MTIf>
                    </MTElse>
                </MTIf>

                <MTIf name="msg">
                <div class="msg msg-error"><$MTGetVar name="msg"$></div>
                </MTIf>

                <MTIf name="display_form">
                <form class="login_form" method="post" action="<$MTGetVar name="script_url"$>" enctype="multipart/form-data">
                    <p>
                        <label for="username"><__trans phrase="Username"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label>
                        <span class="post_input">
                            <input type="text" name="username" id="username" style="ime-mode: disabled;" value="<$MTGetVar name="username" escape="html"$>" />
                        </span>
                    </p>
                    <p>
                        <label for="nickname"><__trans phrase="Display Name"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label>
                        <span class="post_input">
                            <input type="text" name="nickname" id="nickname" value="<$MTGetVar name="nickname" escape="html"$>" />
                        </span>
                    </p>
                    <p>
                        <label for="email"><__trans phrase="Email Address"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label>
                        <span class="post_input">
                            <input type="text" name="email" id="email" style="ime-mode: disabled;" value="<$MTGetVar name="email" escape="html"$>" />
                        </span>
                    </p>
                    <p>
                        <label for="mobile_address"><__trans phrase="Moblie E-mail"></label>
                        <span class="post_input">
                            <input type="text" name="mobile_address" id="mobile_address" style="ime-mode: disabled;" value="<$MTGetVar name="mobile_address" escape="html"$>" />
                        </span>
                    </p>
                    <p>
                        <label for="mail_token"><__trans phrase="Secret Token"></label>
                        <span class="post_input">
                            <input type="password" name="mail_token" id="mail_token" style="ime-mode: disabled;" value="<$MTGetVar name="mail_token" escape="html"$>" />
                        </span>
                    </p>
                    <p>
                        <label for="userpic"><__trans phrase="Userpic"></label>
                        <input type="file" name="userpic" id="userpic" />
                    </p>
                    <p>
                        <label for="password"><__trans phrase="Initial Password"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label>
                        <span class="post_input">
                            <input name="password" id="password" type="password" />
                        </span>
                    </p>
                    <p>
                        <label for="pass_verify"><__trans phrase="Password Confirm"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label>
                        <span class="post_input">
                            <input name="pass_verify" id="pass_verify" type="password" />
                        </span>
                    </p>
                        <MTIfPlugin component="MailMagazine">
                    <p>
                        <label for="mail_subscription"><__trans phrase="Mail Subscription"></label>
                        <label><input name="mail_subscription" id="mail_subscription" type="checkbox" /> <__trans phrase="Subscribe"></label>
                    </p>
                        </MTIfPlugin>
                    <mt:Loop name="field_loop">
                        <mt:If name="__first__">
                            <mt:setvarblock name="customfield_hidden_param">
                                <input type="hidden" name="_type" value="author" id="obj_type" />
                                <input type="hidden" name="customfield_beacon" value="1" id="customfield_beacon" />
                            </mt:setvarblock>
                        </mt:If>
                    <p>
                    <label for="<$mt:var name="field_id"$>"><$mt:var name="name"$><mt:if name="required"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></mt:if></label>

                    <MTAuthorCustomFields include="$name">
                        <MTIf tag="AuthorCustomFieldValue">
                            <$MTAuthorCustomFieldValue setvar="value"$>
                        </MTIf>
                        <mtif tag="CustomFieldQuery">
                            <mt:setvarblock name="value"><$MTCustomFieldQuery$></mt:setvarblock>
                        </mtif>
                    </MTAuthorCustomFields>
                    <mt:if name="type" eq="text">
                        <span class="post_input">
                            <input type="text" name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" value="<$mtvar name="value"$>" class="full-width ti" />
                        </span>
                    <mt:elseif name="type" eq="textarea">
                        <span class="post_input">
                            <textarea name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" rows="3" cols="50"><$mtvar name="value"$></textarea>
                        </span>
                    <mt:elseif name="type" eq="checkbox">
                            <input type="hidden" name="<$mt:var name="field_id"$>_cb_beacon" value="1" />
                            <label>
                                <input type="checkbox" name="<$mt:var name="field_id"$>" value="1" id="<$mt:var name="field_id"$>" class="cb" <mtif name="value">checked="checked"</mtif>/>
                        <mtif name="description">
                                <$mt:var name="description"$>
                        </mtif>
                            </label>
                    <mt:elseif name="type" eq="url">
                        <span class="post_input">
                            <input type="text" name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" value="<$mt:var name="value"$>" class="full-width ti" />
                        </span>
                    <mt:elseif name="type" eq="datetime">
                        <MTAuthorCustomFields include="$name">
                            <MTIf tag="AuthorCustomFieldValue">
                                <$MTAuthorCustomFieldValue format="%Y-%m-%d %H:%M:%S" setvar="value"$>
                            </MTIf>
                            <mtif tag="CustomFieldQuery">
                                <mt:setvarblock name="value"><$MTCustomFieldQuery$></mt:setvarblock>
                            </mtif>
                        </MTAuthorCustomFields>
                        <$mtsetvar name="date_value" value=""$>
                        <$mtsetvar name="time_value" value=""$>
                        <mtif name="value" like="/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/">
                            <mtsetvarblock name="date_value"><$mt:var name="value" regex_replace="/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2})/","$1"$></mtsetvarblock>
                            <mtsetvarblock name="time_value"><$mt:var name="value" regex_replace="/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2})/","$2"$></mtsetvarblock>
                        <mtelse name="value" like="/^\d{4}-\d{2}-\d{2}$/">
                            <mtsetvarblock name="date_value"><$mt:var name="value"$></mtsetvarblock>
                        <mtelse name="value" like="/^\d{2}:\d{2}:\d{2}$/">
                            <mtsetvarblock name="time_value"><$mt:var name="value"$></mtsetvarblock>
                        </mtif>
                        <mtif name="options" eq="datetime">
                            <$mt:setvar name="date_input_type" value="text"$>
                            <$mt:setvar name="time_input_type" value="text"$>
                        <mtelseif name="options" eq="date">
                            <mtunless name="time_value"><$mtsetvar name="time_value" value="00:00:00"$></mtunless>
                            <$mt:setvar name="date_input_type" value="text"$>
                            <$mt:setvar name="time_input_type" value="hidden"$>
                        <mtelseif name="options" eq="time">
                            <mtunless name="date_value"><$mtdate format="%Y-%m-%d" setvar="date_value"$></mtunless>
                            <$mt:setvar name="date_input_type" value="hidden"$>
                            <$mt:setvar name="time_input_type" value="text"$>
                        </mtif>
                        <span class="post_datetime">
                            <input type="<$mt:var name="date_input_type"$>" id="d_<$mt:var name="field_id"$>" name="d_<$mt:var name="field_id"$>" value="<$mtvar name="date_value"$>" class="text-date" />
                            <input type="<$mt:var name="time_input_type"$>" id="t_<$mt:var name="field_id"$>" name="t_<$mt:var name="field_id"$>" value="<$mtvar name="time_value"$>" />
                        </span>
                    <mt:elseif name="type" eq="select">
                        <$mt:setvar name="options_loop"$ value="">
                        <$mt:var name="options" set_loop="options_loop"$>
                        <mt:loop name="options_loop">
                            <mt:if name="__first__">
                        <span class="post_select">
                            <select name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>">
                            </mt:if>
                            <mt:if name="__value__" eq="$value">
                                <option value="<mt:var name="__value__">" selected="selected"><mt:var name="__value__"></option>
                            <mt:else>
                                <option value="<mt:var name="__value__">"><mt:var name="__value__"></option>
                            </mt:if>
                            <mt:if name="__last__">
                            </select>
                        </span>
                            </mt:if>
                        </mt:loop>
                    <mt:elseif name="type" eq="radio">
                        <$mt:setvar name="options_loop"$ value="">
                        <$mt:var name="options" set_loop="options_loop"$>
                        <mt:loop name="options_loop">
                            <mt:if name="__first__">
                        <div class="post_radio">
                            <ul class="post_radio">
                            </mt:if>
                            <mt:if name="__value__" eq="$value">
                                <li><label><input type="radio" name="<$mt:var name="field_id"$>" value="<mt:var name="__value__">" id="<$mt:var name="field_id"$>_<mt:var name="__counter__">" checked="checked" /> <mt:var name="__value__"></label></li>
                            <mt:else>
                                <li><label><input type="radio" name="<$mt:var name="field_id"$>" value="<mt:var name="__value__">" id="<$mt:var name="field_id"$>_<mt:var name="__counter__">" /> <mt:var name="__value__"></label></li>
                            </mt:if>
                            <mt:if name="__last__">
                            </ul>
                        </div>
                            </mt:if>
                        </mt:loop>
                        <mt:elseif name="type" eq="embed">
                        <span class="post_input">
                            <textarea name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" rows="3" cols="50"><$mtvar name="value"$></textarea>
                        </span>
                        </mtif>
                    </p>
                    </mt:Loop>
                    <MTUnless name="blog_id">
                        <p>
                            <select name="blog_id">
                            <MTBlogs>
                            <MTBlogID setvar="this_id">
                            <option value="<MTBlogID>" <MTIf name="this_id" eq="$blog_id">selected="selected"</MTIf>><MTBlogName></option>
                            </MTBlogs>
                            </select>
                        </p>
                    </MTUnless>
                    <$mtvar name="customfield_hidden_param"$>
                    <MTIf name="blog_id">
                        <input type="hidden" name="blog_id" value="<$MTGetVar name="blog_id"$>" />
                    </MTIf>
                    <input type="hidden" name="__mode" value="do_signup" />
                    <p class="post_submit2">
                        <input type="image" src="<$MTBlogURL escape="html"$>common/images/login_btn_acount_01.gif" alt="<__trans phrase="Create an account">" />
                    </p>
                </form>
                </MTIf>
            </div>
        </div>
    </section>
</div>
<footer>
    <p><small>Copyright &copy; <$MTDate format="%Y"$></small></p>
</footer>
</body>
</html>
<mt:else>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=<$MTPublishCharset$>" />
        <meta http-equiv="Content-Script-Type" content="text/javascript" />
        <meta http-equiv="Content-Style-Type" content="text/css" />
        <title><__trans phrase="Create an account"> | <mt:blogname escape="html"></title>
        <link href="<$MTLink template="<__trans phrase="PC-Stylesheet(login.css)">"$>" rel="stylesheet" type="text/css" media="screen,print" />
        <script type="text/javascript" src="<$MTStaticWebPath$>jquery/jquery.min.js?v=<$MTVersion$>"></script>
        <script type="text/javascript" src="<$MTStaticWebPath$>jqueryui/jquery-ui.js?v=<$MTVersion$>"></script>
        <script type="text/javascript">
            jQuery(function() {
                jQuery('input.text-date').datepicker({
                    dateFormat: 'yy-mm-dd',
                    dayNamesMin: [<__trans phrase="_LOCALE_CALENDAR_HEADER_">],
                    monthNames: ['- 01','- 02','- 03','- 04','- 05','- 06','- 07','- 08','- 09','- 10','- 11','- 12'],
                    showMonthAfterYear: true,
                    prevText: '&lt;',
                    nextText: '&gt;'
                });
            });
        </script>
    </head>
    <body class="contents_wide">
        <!-- [contents] -->
        <div id="contents">
            <div class="login_field">
            <div class="login_field_set">
                <div class="login_field_inner">
                    <h1 class="logo"><img src="<$MTBlogURL escape="html"$>common/images/login_logo.gif" width="280" height="55" alt="<$MTBlogName escape="html"$>" /></h1>
                    <$MTSetVar name="msg" value=""$>
                    <MTIf name="error">
                        <$MTSetVar name="error_author_exist" value=""$>
                        <$MTSetVar name="error_required" value=""$>
                        <$MTSetVar name="error_nickname" value=""$>
                        <$MTSetVar name="error_email" value=""$>
                        <$MTSetVar name="error_email_not_valid" value=""$>
                        <$MTSetVar name="error_mobile_not_valid" value=""$>
                        <$MTSetVar name="error_mobile_address" value=""$>
                        <$MTSetVar name="error_password_not_verify" value=""$>
                        <$MTSetVar name="error_password" value=""$>
                        <$MTSetVar name="error_pass_verify" value=""$>
                        <MTLoop name="errors">
                            <MTIf name="error_name" eq="author_exist"><MTSetVarBlock name="error_author_exist"><__trans phrase="A user with the same name already exists."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="required"><MTSetVarBlock name="error_required"><__trans phrase="Please enter requires."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="nickname"><MTSetVarBlock name="error_nickname"><__trans phrase="Please enter your display name."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="email"><MTSetVarBlock name="error_email"><__trans phrase="Please enter your E-mail."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="email_not_valid"><MTSetVarBlock name="error_email_not_valid"><__trans phrase="The value you entered was not a valid E-mail."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="mobile_not_valid"><MTSetVarBlock name="error_mobile_not_valid"><__trans phrase="The value you entered was not a valid Mobile E-mail."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="mobile_address"><MTSetVarBlock name="error_mobile_address"><__trans phrase="Please enter your Mobile E-mail."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="password_not_verify"><MTSetVarBlock name="error_password_not_verify"><__trans phrase="Both passwords must match."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="password"><MTSetVarBlock name="error_password"><__trans phrase="Select a password for your account."><br /></MTSetVarBlock></MTIf>
                            <MTIf name="error_name" eq="pass_verify"><MTSetVarBlock name="error_pass_verify"><__trans phrase="Both passwords must match."><br /></MTSetVarBlock></MTIf>
                        </MTLoop>
                        <$MTSetVar name="error_detail" value=""$>
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_author_exist"$></MTSetVarBlock>
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_required"$></MTSetVarBlock>
                        <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_nickname"$></MTSetVarBlock>
                        <MTIf name="error_email_not_valid">
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_email_not_valid"$></MTSetVarBlock>
                        <MTElse>
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_email"$></MTSetVarBlock>
                        </MTIf>
                        <MTIf name="error_mobile_not_valid">
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_mobile_not_valid"$></MTSetVarBlock>
                        <MTElse>
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_mobile_addres"$></MTSetVarBlock>
                        </MTIf>
                        <MTIf name="error_password">
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_password"$></MTSetVarBlock>
                        <MTElse name="error_pass_verify">
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_pass_verify"$></MTSetVarBlock>
                        <MTElse>
                            <MTSetVarBlock name="error_detail" append="1"><$MTGetVar name="error_password_not_verify"$></MTSetVarBlock>
                        </MTIf>
                        <MTIf name="error_message">
                            <MTSetVarBlock name="error_detail" append="1"><$MTVar name="error_message"$><br /></MTSetVarBlock>
                        </MTIf>
                        <MTIf name="error_detail">
                            <MTSetVarBlock name="msg" append="1"><$MTVar name="error_detail"$></MTSetVarBlock>
                        </MTIf>
                        <MTUnless name="msg">
                            <MTSetVarBlock name="msg"><__trans phrase="Saving failed."></MTSetVarBlock>
                        </MTUnless>
                    </MTIf>
                    <MTIf name="saved">
                        <MTSetVarBlock name="msg"><__trans phrase="Thanks for signing up"></MTSetVarBlock>
                        <MTUnless name="registered">
                            <MTSetVarBlock name="msg"><__trans phrase="To complete the registration process you must first confirm your account. An email has been sent to [_1]." params="<mt:var name="send_email" escape="html">"></MTSetVarBlock>
                        </MTUnless>
                        <MTElse>
                            <MTIf name="regist">
                                <MTIf name="registration_failed">
                                    <MTSetVarBlock name="msg"><__trans phrase="You have attempted to use a feature that you do not have permission to access. If you believe you are seeing this message in error contact your system administrator."></MTSetVarBlock>
                                    <MTElse>
                                        <MTSetVarBlock name="msg"><__trans phrase="Thanks for the confirmation. This account has been disabled. Please wait for a while until it is approved by the administrator."></MTSetVarBlock>
                                    </MTElse>
                                </MTIf>
                                <MTElse>
                                    <$MTSetVar name="display_form" value="1"$>
                                </MTElse>
                            </MTIf>
                        </MTElse>
                    </MTIf>

                    <MTIf name="msg">
                    <div class="msg msg-error"><$MTGetVar name="msg"$></div>
                    </MTIf>

                    <MTIf name="display_form">
                    <form class="login_form" method="post" action="<$MTGetVar name="script_url"$>" enctype="multipart/form-data">
                        <table class="form_table">
                            <tr>
                                <th scope="row"><label for="username"><__trans phrase="Username"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label></th>
                                <td>
                                    <span class="post_input">
                                        <input type="text" name="username" id="username" style="ime-mode: disabled;" value="<$MTGetVar name="username" escape="html"$>" />
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="nickname"><__trans phrase="Display Name"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label></th>
                                <td>
                                    <span class="post_input">
                                        <input type="text" name="nickname" id="nickname" value="<$MTGetVar name="nickname" escape="html"$>" />
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="email"><__trans phrase="Email Address"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label></th>
                                <td>
                                    <span class="post_input">
                                        <input type="text" name="email" id="email" style="ime-mode: disabled;" value="<$MTGetVar name="email" escape="html"$>" />
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="mobile_address"><__trans phrase="Moblie E-mail"></label></th>
                                <td>
                                    <span class="post_input">
                                        <input type="text" name="mobile_address" id="mobile_address" style="ime-mode: disabled;" value="<$MTGetVar name="mobile_address" escape="html"$>" />
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="mail_token"><__trans phrase="Secret Token"></label></th>
                                <td>
                                    <span class="post_input">
                                        <input type="password" name="mail_token" id="mail_token" style="ime-mode: disabled;" value="<$MTGetVar name="mail_token" escape="html"$>" />
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="userpic"><__trans phrase="Userpic"></label></th>
                                <td>
                                    <input type="file" name="userpic" id="userpic" />
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="password"><__trans phrase="Initial Password"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label></th>
                                <td>
                                    <span class="post_input">
                                        <input name="password" id="password" type="password" />
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"><label for="pass_verify"><__trans phrase="Password Confirm"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></label></th>
                                <td>
                                    <span class="post_input">
                                        <input name="pass_verify" id="pass_verify" type="password" />
                                    </span>
                                </td>
                            </tr>
                            <MTIfPlugin component="MailMagazine">
                            <tr>
                                <th scope="row"><label for="mail_subscription"><__trans phrase="Mail Subscription"></label></th>
                                <td>
                                    <label><input name="mail_subscription" id="mail_subscription" type="checkbox" /> <__trans phrase="Subscribe"></label>
                                </td>
                            </tr>
                            </MTIfPlugin>
                            <mt:Loop name="field_loop">
                                <mt:If name="__first__">
                                    <mt:setvarblock name="customfield_hidden_param">
                        <input type="hidden" name="_type" value="author" id="obj_type" />
                        <input type="hidden" name="customfield_beacon" value="1" id="customfield_beacon" />
                                    </mt:setvarblock>
                                </mt:If>
                            <tr>
                            <th scope="row"><label for="<$mt:var name="field_id"$>"><$mt:var name="name"$><mt:if name="required"> <img src="<$MTBlogURL escape="html"$>common/images/login_req_01.gif" alt="<__trans phrase="Required">" class="icon_req" /></mt:if></label></th>
                                <td>

                            <MTAuthorCustomFields include="$name">
                                <MTIf tag="AuthorCustomFieldValue">
                                    <$MTAuthorCustomFieldValue setvar="value"$>
                                </MTIf>
                                <mtif tag="CustomFieldQuery">
                                    <mt:setvarblock name="value"><$MTCustomFieldQuery$></mt:setvarblock>
                                </mtif>
                            </MTAuthorCustomFields>
                            <mt:if name="type" eq="text">
                                <span class="post_input">
                                    <input type="text" name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" value="<$mtvar name="value"$>" class="full-width ti" />
                                </span>
                            <mt:elseif name="type" eq="textarea">
                                <span class="post_input">
                                    <textarea name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" rows="3" cols="50"><$mtvar name="value"$></textarea>
                                </span>
                            <mt:elseif name="type" eq="checkbox">
                                    <input type="hidden" name="<$mt:var name="field_id"$>_cb_beacon" value="1" />
                                    <label>
                                        <input type="checkbox" name="<$mt:var name="field_id"$>" value="1" id="<$mt:var name="field_id"$>" class="cb" <mtif name="value">checked="checked"</mtif>/>
                                <mtif name="description">
                                        <$mt:var name="description"$>
                                </mtif>
                                    </label>
                            <mt:elseif name="type" eq="url">
                                <span class="post_input">
                                    <input type="text" name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" value="<$mt:var name="value"$>" class="full-width ti" />
                                </span>
                            <mt:elseif name="type" eq="datetime">
                                <MTAuthorCustomFields include="$name">
                                    <MTIf tag="AuthorCustomFieldValue">
                                        <$MTAuthorCustomFieldValue format="%Y-%m-%d %H:%M:%S" setvar="value"$>
                                    </MTIf>
                                    <mtif tag="CustomFieldQuery">
                                        <mt:setvarblock name="value"><$MTCustomFieldQuery$></mt:setvarblock>
                                    </mtif>
                                </MTAuthorCustomFields>
                                <$mtsetvar name="date_value" value=""$>
                                <$mtsetvar name="time_value" value=""$>
                                <mtif name="value" like="/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/">
                                    <mtsetvarblock name="date_value"><$mt:var name="value" regex_replace="/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2})/","$1"$></mtsetvarblock>
                                    <mtsetvarblock name="time_value"><$mt:var name="value" regex_replace="/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2})/","$2"$></mtsetvarblock>
                                <mtelse name="value" like="/^\d{4}-\d{2}-\d{2}$/">
                                    <mtsetvarblock name="date_value"><$mt:var name="value"$></mtsetvarblock>
                                <mtelse name="value" like="/^\d{2}:\d{2}:\d{2}$/">
                                    <mtsetvarblock name="time_value"><$mt:var name="value"$></mtsetvarblock>
                                </mtif>
                                <mtif name="options" eq="datetime">
                                    <$mt:setvar name="date_input_type" value="text"$>
                                    <$mt:setvar name="time_input_type" value="text"$>
                                <mtelseif name="options" eq="date">
                                    <mtunless name="time_value"><$mtsetvar name="time_value" value="00:00:00"$></mtunless>
                                    <$mt:setvar name="date_input_type" value="text"$>
                                    <$mt:setvar name="time_input_type" value="hidden"$>
                                <mtelseif name="options" eq="time">
                                    <mtunless name="date_value"><$mtdate format="%Y-%m-%d" setvar="date_value"$></mtunless>
                                    <$mt:setvar name="date_input_type" value="hidden"$>
                                    <$mt:setvar name="time_input_type" value="text"$>
                                </mtif>
                                <span class="post_datetime">
                                    <input type="<$mt:var name="date_input_type"$>" id="d_<$mt:var name="field_id"$>" name="d_<$mt:var name="field_id"$>" value="<$mtvar name="date_value"$>" class="text-date" />
                                    <input type="<$mt:var name="time_input_type"$>" id="t_<$mt:var name="field_id"$>" name="t_<$mt:var name="field_id"$>" value="<$mtvar name="time_value"$>" />
                                </span>
                            <mt:elseif name="type" eq="select">
                                <$mt:setvar name="options_loop"$ value="">
                                <$mt:var name="options" set_loop="options_loop"$>
                                <mt:loop name="options_loop">
                                    <mt:if name="__first__">
                                <span class="post_select">
                                    <select name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>">
                                    </mt:if>
                                    <mt:if name="__value__" eq="$value">
                                        <option value="<mt:var name="__value__">" selected="selected"><mt:var name="__value__"></option>
                                    <mt:else>
                                        <option value="<mt:var name="__value__">"><mt:var name="__value__"></option>
                                    </mt:if>
                                    <mt:if name="__last__">
                                    </select>
                                </span>
                                    </mt:if>
                                </mt:loop>
                            <mt:elseif name="type" eq="radio">
                                <$mt:setvar name="options_loop"$ value="">
                                <$mt:var name="options" set_loop="options_loop"$>
                                <mt:loop name="options_loop">
                                    <mt:if name="__first__">
                                <div class="post_radio">
                                    <ul class="post_radio">
                                    </mt:if>
                                    <mt:if name="__value__" eq="$value">
                                        <li><label><input type="radio" name="<$mt:var name="field_id"$>" value="<mt:var name="__value__">" id="<$mt:var name="field_id"$>_<mt:var name="__counter__">" checked="checked" /> <mt:var name="__value__"></label></li>
                                    <mt:else>
                                        <li><label><input type="radio" name="<$mt:var name="field_id"$>" value="<mt:var name="__value__">" id="<$mt:var name="field_id"$>_<mt:var name="__counter__">" /> <mt:var name="__value__"></label></li>
                                    </mt:if>
                                    <mt:if name="__last__">
                                    </ul>
                                </div>
                                    </mt:if>
                                </mt:loop>
                                <mt:elseif name="type" eq="embed">
                                <span class="post_input">
                                    <textarea name="<$mt:var name="field_id"$>" id="<$mt:var name="field_id"$>" rows="3" cols="50"><$mtvar name="value"$></textarea>
                                </span>
                                </mtif>
                                </td>
                            </tr>
                            </mt:Loop>
                            <MTUnless name="blog_id">
                            <tr>
                                <th scope="row">&nbsp;</th>
                                <td>
                                    <select name="blog_id">
                                    <MTBlogs>
                                    <MTBlogID setvar="this_id">
                                    <option value="<MTBlogID>" <MTIf name="this_id" eq="$blog_id">selected="selected"</MTIf>><MTBlogName></option>
                                    </MTBlogs>
                                    </select>
                                </td>
                            </tr>
                            </MTUnless>
                        </table>
                        <$mtvar name="customfield_hidden_param"$>
                        <MTIf name="blog_id">
                            <input type="hidden" name="blog_id" value="<$MTGetVar name="blog_id"$>" />
                        </MTIf>
                        <input type="hidden" name="__mode" value="do_signup" />
                        <p class="post_submit2">
                            <input type="image" src="<$MTBlogURL escape="html"$>common/images/login_btn_acount_01.gif" alt="<__trans phrase="Create an account">" />
                        </p>
                    </form>
                    </MTIf>
                </div>
            </div>
            </div>
        </div>
        <!-- /[contents] -->
        <hr class="doc_separate" />
        <div id="footer">
            <div id="footer_info">
                <address class="copy">Copyright &copy; <$MTDate format="%Y"$> <$MTBlogName$>. All rights reserved.</address>
            </div>
        </div>
    </body>
</html>
</mt:else>
</mt:IfUserAgent>
